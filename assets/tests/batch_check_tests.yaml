tests:
  - name: validation_relation_not_in_model
    model: |
      model
        schema 1.1
      type user

      type document
        relations
          define viewer: [user]
    tuples:
      - object: document:1
        relation: viewer
        user: user:aardvark
    assertions:
      - request:
          checks:
            - tupleKey:
                object: document:1
                relation: viewer
                user: user:aardvark
              correlationID: aardvarkId
            - tupleKey:
                object: document:1
                relation: writer
                user: user:aardvark
              correlationID: aardvark2
        expectation:
          - correlationID: aardvarkId
            allowed: true
          - correlationID: aardvark2
            inputError: 2000 # validation error
  - name: validation_user_invalid
    model: |
      model
        schema 1.1
      type user

      type document
        relations
          define viewer: [user]
    tuples:
      - object: document:1
        relation: viewer
        user: user:aardvark
    assertions:
      - request:
          checks:
            - tupleKey:
                object: document:1
                relation: viewer
                user: user:aardvark
              correlationID: aardvarkId
            - tupleKey:
                object: document:1
                relation: writer
                user: userardvark
              correlationID: aardvark2
        expectation:
          - correlationID: aardvarkId
            allowed: true
          - correlationID: aardvark2
            inputError: 2000 # validation error
  - name: validation_object_invalid
    model: |
      model
        schema 1.1
      type user

      type document
        relations
          define viewer: [user]
    tuples:
      - object: document:1
        relation: viewer
        user: user:aardvark
    assertions:
      - request:
          checks:
            - tupleKey:
                object: document:1
                relation: viewer
                user: user:aardvark
              correlationID: aardvarkId
            - tupleKey:
                object: document5
                relation: writer
                user: user:aardvark
              correlationID: aardvark2
        expectation:
          - correlationID: aardvarkId
            allowed: true
          - correlationID: aardvark2
            inputError: 2000 # validation error
