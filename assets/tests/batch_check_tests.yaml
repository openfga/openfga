tests:
  - name: this
    model: |
      model
        schema 1.1
      type user

      type document
        relations
          define viewer: [user]
    tuples:
      - object: document:1
        relation: viewer
        user: user:aardvark
    assertions:
      - request:
          checks:
            - tupleKey:
                object: document:1
                relation: viewer
                user: user:aardvark
              correlationID: aardvarkId
            - tupleKey:
                object: document:2
                relation: writer
                user: user:aardvark
              correlationID: aardvark2
            - tupleKey:
                object: document2
                relation: viewer
                user: user:aardvark
              correlationID: aardvark3
        expectation:
          - correlationID: aardvarkId
            allowed: true
          - correlationID: aardvark2
            error: relation 'document#writer' not found
          - correlationID: aardvark3
            error: invalid 'object' field format
