tests:
  - name: This
    stages:
      - model: |
          type user
          
          type document
            relations
              define viewer: [user] as self
        tuples:
          - object: document:1
            relation: viewer
            user: user:abigail
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: false

  - name: ComputedUserset
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define viewer as writer
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: writer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:abigail
            expectation: false

  - name: TupleToUserset
    stages:
      - model: |
          type user
          
          type folder
            relations
              define viewer: [user] as self
          
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:x
          - object: folder:x
            relation: viewer
            user: user:abigail
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true

  - name: ThisAndUnion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define viewer: [user] as self or writer
        tuples:
          - object: document:1
            relation: viewer
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true

  - name: ThisAndIntersection
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define viewer: [user] as self and writer
        tuples:
          - object: document:1
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:2
            relation: viewer
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:charlie
            expectation: false

  - name: ThisAndExclusionBase
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define viewer: [user] as self but not writer
        tuples:
          - object: document:1
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:2
            relation: viewer
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:charlie
            expectation: false

  - name: ComputedUsersetAndUnion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer or editor
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:2
            relation: editor
            user: user:beatrix
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true

  - name: ComputedUsersetAndIntersection
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer and editor
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false

  - name: ComputedUsersetAndExclusion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer but not editor
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false

  - name: TupleToUsersetAndComputedUserset
    stages:
      - model: |
          type user
          
          type folder
            relations
              define writer: [user] as self
              define viewer as writer
    
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: writer
            user: user:abigail
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true

  - name: TupleToUsersetAndTupleToUserset
    stages:
      - model: |
          type user
          
          type group
            relations
              define member: [user] as self
    
          type folder
            relations
              define parent: [group] as self
              define viewer as member from parent
    
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: parent
            user: group:G
          - object: group:G
            relation: member
            user: user:abigail
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true

  - name: TupleToUsersetAndUnion
    stages:
      - model: |
          type user
          
          type folder
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer or editor
    
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: editor
            user: user:beatrix
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: true

  - name: TupleToUsersetAndIntersection
    stages:
      - model: |
          type user
          
          type folder
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer and editor
    
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: editor
            user: user:abigail
          - object: folder:X
            relation: writer
            user: user:beatrix
          - object: folder:X
            relation: editor
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:1
              relation: viewer
              user: user:charlie
            expectation: false

  - name: TupleToUsersetAndExclusion
    stages:
      - model: |
          type user
          
          type folder
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer but not editor
    
          type document
            relations
              define parent: [folder] as self
              define viewer as viewer from parent
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: editor
            user: user:abigail
          - object: folder:X
            relation: writer
            user: user:beatrix
          - object: folder:X
            relation: editor
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:1
              relation: viewer
              user: user:charlie
            expectation: false

  - name: UnionAndTupleToUserset
    stages:
      - model: |
          type user
          type folder
            relations
              define viewer: [user] as self
    
          type document
            relations
              define parent: [folder] as self
              define writer: [user] as self
              define viewer as writer or (viewer from parent)
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:beatrix
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: true

  - name: UnionAndUnion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer or (editor or owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: owner
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true

  - name: UnionAndIntersection
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer or (editor and owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
          - object: document:4
            relation: owner
            user: user:daphne
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false

  - name: UnionAndExclusion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer or (editor but not owner)
        tuples:
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
          - object: document:4
            relation: owner
            user: user:daphne
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false

  - name: IntersectionAndTupleToUserset
    stages:
      - model: |
          type user
          
          type folder
            relations
              define viewer: [user] as self
    
          type document
            relations
              define parent: [folder] as self
              define writer: [user] as self
              define viewer as writer and (viewer from parent)
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: viewer
            user: user:beatrix
          - object: document:2
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:charlie
            expectation: false

  - name: IntersectionAndUnion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer and (editor or owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:4
            relation: editor
            user: user:daphne
          - object: document:5
            relation: owner
            user: user:elise
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false
          - tuple:
              object: document:5
              relation: viewer
              user: user:elise
            expectation: false

  - name: IntersectionAndIntersection
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer and (editor and owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:3
            relation: owner
            user: user:charlie
          - object: document:4
            relation: writer
            user: user:daphne
          - object: document:5
            relation: editor
            user: user:elise
          - object: document:6
            relation: owner
            user: user:fernanda
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false
          - tuple:
              object: document:5
              relation: viewer
              user: user:elise
            expectation: false
          - tuple:
              object: document:6
              relation: viewer
              user: user:fernanda
            expectation: false

  - name: IntersectionAndExclusion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer and (editor but not owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:3
            relation: owner
            user: user:charlie
          - object: document:4
            relation: writer
            user: user:daphne
          - object: document:5
            relation: editor
            user: user:elise
          - object: document:6
            relation: owner
            user: user:fernanda
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false
          - tuple:
              object: document:5
              relation: viewer
              user: user:elise
            expectation: false
          - tuple:
              object: document:6
              relation: viewer
              user: user:fernanda
            expectation: false

  - name: ExclusionAndComputedUnion
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define viewer as writer but not editor
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false

  - name: ExclusionAndTupleToUsersetInBase
    stages:
      - model: |
          type user
          
          type folder
            relations
              define viewer: [user] as self
    
          type document
            relations
              define parent: [folder] as self
              define writer: [user] as self
              define viewer as (viewer from parent) but not writer
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: viewer
            user: user:beatrix
          - object: document:2
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:charlie
            expectation: false

  - name: ExclusionAndTupleToUsersetInSubtract
    stages:
      - model: |
          type user
          
          type folder
            relations
              define viewer: [user] as self
    
          type document
            relations
              define parent: [folder] as self
              define writer: [user] as self
              define viewer as writer but not (viewer from parent)
        tuples:
          - object: document:1
            relation: parent
            user: folder:X
          - object: folder:X
            relation: viewer
            user: user:abigail
          - object: document:1
            relation: writer
            user: user:abigail
          - object: folder:X
            relation: viewer
            user: user:beatrix
          - object: document:2
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:1
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:charlie
            expectation: true

  - name: ExclusionAndUnionInBase
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as (writer or editor) but not owner
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: editor
            user: user:charlie
          - object: document:3
            relation: owner
            user: user:charlie
          - object: document:4
            relation: writer
            user: user:daphne
          - object: document:5
            relation: editor
            user: user:elise
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: true
          - tuple:
              object: document:5
              relation: viewer
              user: user:elise
            expectation: true

  - name: ExclusionAndUnionInSubtract
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer but not (editor or owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true

  - name: ExclusionAndIntersectionInBase
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as (writer and editor) but not owner
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:4
            relation: editor
            user: user:daphne
          - object: document:5
            relation: owner
            user: user:elise
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: false
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: false
          - tuple:
              object: document:5
              relation: viewer
              user: user:elise
            expectation: false

  - name: ExclusionAndIntersectionInSubtract
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer but not (editor and owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:3
            relation: owner
            user: user:charlie
          - object: document:4
            relation: writer
            user: user:daphne
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: true
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true
          - tuple:
              object: document:4
              relation: viewer
              user: user:daphne
            expectation: true

  - name: ExclusionAndExclusionInBase
    stages:
      - model: |
          type user
          
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as (writer but not editor) but not owner
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: owner
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: false
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true

  - name: ExclusionAndExclusionInSubtract
    stages:
      - model: |
          type user
          type document
            relations
              define writer: [user] as self
              define editor: [user] as self
              define owner: [user] as self
              define viewer as writer but not (editor but not owner)
        tuples:
          - object: document:1
            relation: writer
            user: user:abigail
          - object: document:1
            relation: editor
            user: user:abigail
          - object: document:1
            relation: owner
            user: user:abigail
          - object: document:2
            relation: writer
            user: user:beatrix
          - object: document:2
            relation: editor
            user: user:beatrix
          - object: document:3
            relation: writer
            user: user:charlie
          - object: document:3
            relation: owner
            user: user:charlie
        assertions:
          - tuple:
              object: document:1
              relation: viewer
              user: user:abigail
            expectation: true
          - tuple:
              object: document:2
              relation: viewer
              user: user:beatrix
            expectation: false
          - tuple:
              object: document:3
              relation: viewer
              user: user:charlie
            expectation: true
