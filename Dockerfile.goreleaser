FROM cgr.dev/chainguard/go:1.25.3@sha256:c95baa2517f33a3d9ec60536f3241275f765be3ca079e75bded303b62d1bd679
COPY assets /assets
COPY openfga /

# Goreleaser does not support multi-stage builds. See:
# https://github.com/goreleaser/goreleaser/issues/609
#
# Dependabot is also not capable of updating inline image copies at this time, so
# this needs to be updated manually until one of these issues is resolved.
COPY --from=ghcr.io/grpc-ecosystem/grpc-health-probe:v0.4.41@sha256:3b7280dd5f61907bb7e06f436fdea471a58685cfdd7ef18c75e85626a1eb0ade /ko-app/grpc-health-probe /usr/local/bin/grpc_health_probe
ENTRYPOINT ["/openfga"]
